# 30. Islands (Partial Hydration)

One of Xvelte's core features is a rendering strategy called the **Islands Architecture**, or **Partial Hydration**. This approach aims to maximize the initial loading performance of a website.

## The Problem with Traditional Hydration

Traditional Server-Side Rendering (SSR) frameworks send HTML generated on the server to the client, and then go through a 'hydration' process that downloads the JavaScript for the entire page to attach event handlers and state to the DOM elements. While this method makes all components on the page interactive, it has the disadvantage that as the page becomes more complex, the amount of JavaScript increases, leading to longer initial load times and Time to Interactive (TTI).

## Xvelte's Solution: Islands

Xvelte solves this problem with the concept of 'islands'. If you think of the entire page as a large continent, only the parts that require interaction (e.g., buttons, image sliders, autocomplete search bars) are treated as 'islands'.

- **Static HTML by Default**: Most of the page remains as pure, non-interactive HTML.
- **Only Islands are Activated**: Only the components that need to be interactive are 'activated' (hydrated) with JavaScript.

This allows the client to download and execute only the minimum amount of JavaScript required to render the page, enabling users to see and interact with the page much faster.

## How to Use

In Xvelte, you can very easily specify an island using the built-in `<Island>` component.

**Important**: To specify that a component passed to the `<Island>` component must be rendered on the client, you must append `?client` to the end of the import path. This tells the Xvelte build system that the JavaScript for that component needs to be sent to the client.

```svelte
<!-- page/Index.svelte -->
<script>
    import Counter from '../components/Counter.svelte?client';
    import Island from '@hotsixman/xvelte/components/Island.svelte';
</script>

<h1>Static Content</h1>
<p>This part is not hydrated.</p>

<!-- Designate the Counter component as an island -->
<Island component={Counter} props={{ initialValue: 5 }} />
```

In the example above, the `<h1>` and `<p>` tags remain as pure HTML, but only the `Counter` component wrapped with `<Island>` is hydrated on the client and becomes interactive.

### Controlling Hydration Timing

You can use the `on` prop of the `<Island>` component to control when the JavaScript is loaded and the component is activated. This is very useful for performance optimization.

-   **`on="visible"`**: The component is activated when the user scrolls and it first becomes visible in the viewport. This is good for components at the bottom of the page.
-   **`on="click"`**: The component is activated when it is first clicked. This is suitable for cases where immediate interaction is not required, such as modal windows or dropdown menus.
-   **`on="mouseenter"`**: The component is activated when the user's mouse cursor enters the component's area.
-   **If the `on` prop is not specified**: It is activated immediately as soon as the page loads.

```svelte
<script>
    import HeavyComponent from '../components/HeavyComponent.svelte';
    import Island from '@hotsixman/xvelte/components/Island.svelte';
</script>

<!-- A heavy component that only loads when it becomes visible -->
<Island component={HeavyComponent} on="visible" />
```

As you can see, Xvelte's island feature is useful for performance optimization.
