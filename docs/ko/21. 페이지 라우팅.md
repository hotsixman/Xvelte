# 페이지 라우팅

```ts
app.page(path, handler);
```

페이지 라우팅은 `page` 메소드를 사용합니다. 경로와 핸들러를 등록할 수 있습니다.

## 경로
경로는 동적 라우팅과 정적 라우팅을 모두 지원합니다. 정적 라우팅이 우선적으로 사용되고, 이후 동적 라우팅이 사용됩니다.

같은 경로에 대해 여러번 핸들러를 등록하면 마지막으로 등록한 핸들러가 사용됩니다.

동적라우팅은 [path-to-regexp](https://github.com/pillarjs/path-to-regexp) 라이브러리를 사용하므로, 여기를 참고해주세요.

## 핸들러
Xvelte는 핸들러에서 반환된 값을 토대로 페이지 html을 생성합니다. 
```ts
app.page('/', (event) => {
    return {
        layouts: [
            {
                component: Layout1,
                props: {foo: 'bar'}
            },
            {
                component: Layout2
            }
        ],
        component: Index,
        props: {f: 1}
    }
});
```

페이지 핸들러는 Svelte 컴포넌트와 props를 반환해야합니다. 사용하는 컴포넌트에 따라 props는 생략될 수 있습니다.

핸들러에서는 `event` 객체를 통해, 브라우저의 요청 데이터를 가져오거나, 헤더 및 쿠키를 설정하는 등의 작업을 수행할 수 있습니다. 이 내용은 [RequestEvent](./23.%20RequestEvent.md)를 참고하세요.

### 레이아웃

레이아웃에는 여러 페이지에 공통적으로 사용되는 부분을 작성할 수 있으며, 여러 개의 레이아웃을 사용할 수 있습니다.

페이지를 이동할 때, 공통된 레이아웃은 유지됩니다. 예를 들어,

- page1: Layout1, Layout2
- page2: Layout1, Layout3

일 때, page1에서 page2로 이동하면 브라우저에서 Layout1 부분은 재생성되지 않고, Layout2가 사라지고 Layout3가 생성됩니다.

만약

- page1: Layout1, Layout2
- page2: Layout3, Layout2

와 같은 경우에는, 처음 레이아웃이 일치하지 않으므로 전체 페이지가 사라지고 Layout3 부터 생성됩니다.